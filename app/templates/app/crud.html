{% extends 'bases/index.html' %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-6">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Id</th>
            <th scope="col">Código</th>
            <th scope="col">Descripción</th>
            <th scope="col">Acción</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>    
    </div>
    <div class="col-6">
      <div class="row">
        <div class="col-6">
          <input type="text" id="codigo" class="form-control" placeholder="Código">
        </div>
        <div class="col-6">
          <input type="text" id="descripcion" class="form-control" placeholder="Descripción">
        </div>
      </div>
      <hr class="mt-3 mb-3"/>
      <div class="row">
        <div class="col">
          <button type="button" id="add-row" class="btn btn-warning">Agregar</button>
          <button type="button" class="btn btn-info">Cancelar</button>
          <button type="button" class="btn btn-danger" id="btnSave">Guardar</button>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock%}

{% block js%}
<script>
  $(document).ready(function(){

  })
  $("#add-row").click(function(){
    var codigo = $("#codigo").val();
    var desc   = $("#descripcion").val();
    var html = `<tr><td></td><td>${codigo}</td><td>${desc}</td><td></td></tr>`
    // console.log(html)
    if(codigo==""){
      alert("Código Requerido")
      $("#codigo").focus()
      return
    }
    if(desc==""){
      alert("Descripción Requerida")
      $("#descripcion").focus()
      return
    }
    $("table tbody").append(html)
  })

  $("#btnSave").click(function(){
    $("table tbody>tr").each(function (){
      var self = $(this)
      var codigo = self.find("td:eq(1)").text().trim()
      var desc = self.find("td:eq(2)").text().trim()
      var result = codigo + " " + desc
      console.log(self)
      alert(result)
    })
  })

</script>
{% endblock%}