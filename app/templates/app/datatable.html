{% extends 'bases/index.html' %}

{% block content %}
<table class="table table-hover" id="tbl">
    <thead>
      <tr>
        <th scope="col">Id</th>
        <th scope="col">Código</th>
        <th scope="col">Descripción</th>
        <!-- <th scope="col">Acción</th> -->
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
{% endblock%}

{% block js%}
<script>
  $(document).ready( function () {
    var editor = new $.fn.dataTable.Editor( {
        ajax:  '/api/staff',
        table: '#tbl',
        fields: [
            { label: 'Código', name: 'codigo' },
            { label: 'Descripción',  name: 'descripcion'  },
            // etc
        ]
    });

    $('#tbl').DataTable({
      ajax: {
        url: "{% url 'app:reload'%}",
        dataSrc: "datos"
      },
      columns: [
        {data: "id"},
        {data: "codigo"},
        {data: "descripcion"}
      ],
      rowId: "id",
      select:true,
      dom: 'Bfrtip',
      buttons: [
            { extend: "create", editor: editor },
            { extend: "edit",   editor: editor },
            { extend: "remove", editor: editor }
        ]
    });
} );
</script>
{% endblock %}